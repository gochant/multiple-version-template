
div.dropdown.mega.breadcrumb.no-margin
  span(data-toggle='dropdown', style={ cursor:'pointer'})
    span.fn-current(data-bind='text: text')
    | &nbsp;&nbsp;
    span.caret
  div.dropdown-menu.no-padding.fn-selector

script#region-selector-pane(type='text/template').
  <div class="panel panel-default panel-xs no-margin nested-selector">
      <div class="panel-heading">
          <ul class="nav nav-tabs tab-styled nav-sm">
              # var hasSetActive = false; #
              # for(var i = 0, len = data.nav.length; i < len; i++){ #
              #  var item = data.nav[i]  #
              #  var cls = (data.requestKey === item.parentKey || (hasSetActive === false && i === len - 1)) ? "active" : ""; #
              # if(cls === 'active') { hasSetActive = true;  } #
                <li class="#= cls #">
                  <a class="fn-nav-item" href="javascript:;" data-parent-key="#= item.parentKey #"> #= item.text # </a>
                </li>
              # } #
          </ul>      
      </div>

      <div class="panel-body">
          <ul class="list-inline">
            # for(var i = 0, len = data.list.length; i < len; i++){ #
            # var item = data.list[i]; #
            # var cls = (_.findIndex(data.nav, function(n){ #
            #  return n.parentKey === item.key #
            # }) >= 0 || data.currentKey === item.key) ? 'active' : ''; #
              <li class="#= cls #">
                <a class="fn-list-item btn btn-xs" data-key="#= item.key #" data-text="#= item.longText #">
                  #= item.text #
                </a>
              </li>
            # } #
          </ul>
      </div>
      <div class="panel-footer clearfix">
        <div class="pull-left input-sm">选择：&nbsp;#= data.currentText #</div>
        <div class="pull-right">
            <a class="btn btn-default btn-sm fn-ok">确定</a>
        </div>
      </div>
  </div>